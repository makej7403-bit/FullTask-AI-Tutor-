<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>FullTask AI Tutor ‚Äî FullTask AI</title>
  <meta name="description" content="FullTask AI Tutor ‚Äî Created by Akin S Sokpah from Liberia. Chat, record, upload, speak, and live call with AI." />
  <link rel="stylesheet" href="./style.css" />
  <!-- Daily SDK will be loaded in app.js when joining a call -->
</head>
<body>
  <div id="app" class="app">
    <!-- Sidebar -->
    <aside id="sidebar" class="sidebar collapsed">
      <div class="sidebar-top">
        <div class="brand">
          <div class="logo">FullTask</div>
          <div class="title">AI Tutor</div>
        </div>
        <div class="subtitle">Created by Akin S Sokpah ‚Äî Liberia</div>
      </div>

      <div class="sidebar-actions">
        <button id="collapseBtn" class="icon-btn" title="Toggle menu">‚ò∞</button>
      </div>

      <nav class="tools">
        <div class="tools-search">
          <input id="toolSearch" placeholder="Search tools..." />
        </div>
        <div id="toolList" class="tool-list"></div>
      </nav>

      <div class="sidebar-bottom">
        <div id="accountArea" class="account-area">
          <button id="signInBtn" class="btn primary full">Sign in with Google</button>
        </div>

        <div class="upload-row">
          <label class="muted small">Uploads</label>
          <input id="fileInput" type="file" accept="image/*,audio/*,application/pdf" />
        </div>

        <div class="contact muted small">
          Contact creator:
          <a href="https://www.facebook.com/profile.php?id=61583456361691" target="_blank" rel="noopener">Facebook</a><br/>
          sokpahakinsaye@gmail.com
        </div>
      </div>
    </aside>

    <!-- Main -->
    <main class="main">
      <header class="topbar">
        <div class="left">
          <button id="menuToggle" class="icon-btn">‚ò∞</button>
          <div class="page-title">FullTask AI Tutor</div>
          <div class="tool-tag" id="activeToolTag">AI Assistant</div>
        </div>
        <div class="right">
          <button id="joinCallBtn" class="btn secondary">Join Live Call</button>
          <button id="ttsBtn" class="btn secondary">Speak Reply</button>
        </div>
      </header>

      <section class="content">
        <div class="grid">
          <!-- Tools Grid -->
          <section class="tools-grid card">
            <div class="grid-header">
              <h3>Tools</h3>
              <div class="small muted">Tap a tool to load example prompts</div>
            </div>
            <div id="toolsGrid" class="grid-items"></div>
          </section>

          <!-- Chat Panel -->
          <section class="chat-panel card">
            <div id="chatWindow" class="chat-window" aria-live="polite"></div>

            <div class="composer">
              <textarea id="promptInput" placeholder="Ask FullTask AI Tutor..." rows="4"></textarea>

              <div class="composer-actions">
                <div class="left-actions">
                  <button id="startRec" class="icon-btn">üé§</button>
                  <button id="stopRec" class="icon-btn" disabled>‚èπ</button>
                  <input id="hiddenFile" type="file" accept="audio/*" style="display:none" />
                </div>

                <div class="right-actions">
                  <button id="resetBtn" class="btn secondary">Reset</button>
                  <button id="runBtn" class="btn primary">Run</button>
                </div>
              </div>
            </div>
          </section>

          <!-- Feature Help & Live Call -->
          <aside class="sidecard card">
            <h4>Feature Help</h4>
            <div id="featureHelp" class="muted">Select a feature to see example prompts and tips.</div>

            <div class="divider"></div>

            <h4>Recording</h4>
            <div class="muted small">Use Start / Stop to record audio and auto-transcribe.</div>

            <div class="divider"></div>

            <h4>Live Call</h4>
            <div><button id="openCallModal" class="btn">Start / Join Live Call</button></div>

            <div class="divider"></div>

            <h4>Creator</h4>
            <div class="muted small">Akin S Sokpah from Liberia</div>
          </aside>
        </div>
      </section>

      <footer class="footer">
        <div>FullTask AI Tutor ‚Äî Created by Akin S Sokpah from Liberia ‚Ä¢ <a href="https://www.facebook.com/profile.php?id=61583456361691" target="_blank" rel="noopener">Facebook</a></div>
      </footer>
    </main>
  </div>

  <!-- Firebase (for Google login) -->
  <script type="module">
    // We include only the minimal firebase modules to sign in with Google.
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
    import { getAuth, GoogleAuthProvider, signInWithPopup, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";

    // Use the Firebase config you provided earlier (kept client-side).
    const firebaseConfig = {
      apiKey: "AIzaSyC7cAN-mrE2PvmlQ11zLKAdHBhN7nUFjHw",
      authDomain: "fir-u-c-students-web.firebaseapp.com",
      databaseURL: "https://fir-u-c-students-web-default-rtdb.firebaseio.com",
      projectId: "fir-u-c-students-web",
      storageBucket: "fir-u-c-students-web.firebasestorage.app",
      messagingSenderId: "113569186739",
      appId: "1:113569186739:web:d8daf21059f43a79e841c6"
    };
    const fbApp = initializeApp(firebaseConfig);
    const auth = getAuth(fbApp);
    const provider = new GoogleAuthProvider();

    // expose auth for app.js (it will import via window.__FT__)
    window.__FT__ = window.__FT__ || {};
    window.__FT__.firebaseAuth = auth;
    window.__FT__.firebaseProvider = provider;
    window.__FT__.onAuthStateChanged = onAuthStateChanged;
    window.__FT__.signOut = signOut;
    window.__FT__.signInWithPopup = signInWithPopup;
  </script>

  <!-- App JS (will attach event handlers, recording, fetch to secure /api endpoints) -->
  <script src="./app.js" type="module"></script>
</body>
</html>
